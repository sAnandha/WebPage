<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting to Cognito...</title>
  <script src="https://cdn.jsdelivr.net/npm/oidc-client@1.11.5/dist/oidc-client.min.js"></script>
</head>
<body>
  <p>Redirecting to sign in...</p>

  <script>
    const userManager = new Oidc.UserManager({
      authority: "https://cognito-idp.us-east-1.amazonaws.com/us-east-1_E1V33d9fq",
      client_id: "2g17vttj8eeb7fhacugmmfnkeq",
      redirect_uri: "https://main.de43hd7rcr7qe.amplifyapp.com/dashboard.html",
      response_type: "code",
      scope: "openid email phone"
    });

    userManager.getUser().then(user => {
      if (user && !user.expired) {
        // Already logged in, redirect to dashboard
        window.location.href = "dashboard.html";
      } else {
        // Not logged in, redirect to Cognito login
        userManager.signinRedirect();
      }
    }).catch(error => {
      console.error("Error:", error);
      userManager.signinRedirect();
    });
  </script>
</body>
</html>
